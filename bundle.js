var explain=function(){"use strict";const e={active:"active",blank:"blank",checked:"checked",disabled:"disabled",empty:"empty",enabled:"enabled","first-child":"the first child of its parent","first-of-type":"the first of its type in its parent",focus:"focused",hover:"hovered",indeterminate:"indeterminate","in-range":"in-range",invalid:"invalid","last-child":"the last child of its parent","last-of-type":"the last of its type in its parent","nth-child":"the nth child (formula) of its parent","nth-of-type":"the nth of its type (formula) in its parent","only-child":"the only child of its parent","only-of-type":"the only of its type in its parent",optional:"optional","out-of-range":"out-of-range","read-only":"read-only","read-write":"read-write",required:"required",target:"targeted",valid:"valid",visited:"visited"},t=["html","body","head"];var r=e=>`‘${e}’`,s=({name:t})=>Object.keys(e).includes(t),i=e=>{const{id:i,tagName:n}=e,a=(({pseudos:e=[]})=>{const t=e.find(e=>""!==e.name&&!s(e));return t?`the ${r(t.name)} pseudo-element of `:""})(e),o=[n&&"*"!==n?`<${n}>`:"","element"].filter(Boolean).join(" ");return a+(i||t.includes(n)?"the":/^[aeiouy]/.test(o.replace("<",""))?"an":"a")+" "+o},n=e=>e.reduce((t,r,s)=>0===s?t+r:s===e.length-1?t+" and "+r:t+", "+r,"");const a=e=>"an attribute "+(e.value?`${r(e.name)} whose value ${(e=>{const t=r(e.value);switch(e.operator){case"=":return"is "+t;case"*=":return"contains "+t;case"^=":return"starts with "+t;case"$=":return"ends with "+t;case"~=":return"is a space-separated list of values, one of which is "+t;case"|=":return"is an hyphen-separated list of values, one of which is "+t}})(e)}`:r(e.name));var o=({attrs:e=[]})=>0===e.length?"":n(e.map(a)),u=({classNames:e=[]})=>0===e.length?"":1===e.length?"class "+r(e[0]):"classes "+n(e.map(r)),l=({id:e})=>e?`id ${r(e)}`:"",c=e=>[l,u,o].map(t=>t(e)).filter(Boolean).reduce((e,t,r)=>0===r?e+"with "+t:e+" and "+t,""),h=({pseudos:t=[]})=>{const r=t.filter(s).map(t=>e[t.name]);return r.length>0?`provided it is ${n(r)}`:""};var f=e=>e.reduce((t,r,s)=>{const n=t+(e=>[i,c,h].map(t=>t(e)).filter(Boolean).join(" "))(r);return s===e.length-1?n:n+(0===s?"":" itself")+(({nestingOperator:e})=>{switch(e){case">":return" directly within ";case"+":return" directly adjacent to ";case"~":return" after ";default:return" within "}})(r)},"");function p(){this.pseudos={},this.attrEqualityMods={},this.ruleNestingOperators={},this.substitutesEnabled=!1}function d(e){return e>="a"&&e<="f"||e>="A"&&e<="F"||e>="0"&&e<="9"}p.prototype.registerSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="selector";return this},p.prototype.unregisterSelectorPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},p.prototype.registerNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.pseudos[e]="numeric";return this},p.prototype.unregisterNumericPseudos=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.pseudos[e];return this},p.prototype.registerNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.ruleNestingOperators[e]=!0;return this},p.prototype.unregisterNestingOperators=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.ruleNestingOperators[e];return this},p.prototype.registerAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],this.attrEqualityMods[e]=!0;return this},p.prototype.unregisterAttrEqualityMods=function(e){for(var t=0,r=arguments.length;t<r;t++)e=arguments[t],delete this.attrEqualityMods[e];return this},p.prototype.enableSubstitutes=function(){return this.substitutesEnabled=!0,this},p.prototype.disableSubstitutes=function(){return this.substitutesEnabled=!1,this};var v={"!":!0,'"':!0,"#":!0,$:!0,"%":!0,"&":!0,"'":!0,"(":!0,")":!0,"*":!0,"+":!0,",":!0,".":!0,"/":!0,";":!0,"<":!0,"=":!0,">":!0,"?":!0,"@":!0,"[":!0,"\\":!0,"]":!0,"^":!0,"`":!0,"{":!0,"|":!0,"}":!0,"~":!0},y={"\n":"\\n","\r":"\\r","\t":"\\t","\f":"\\f","\v":"\\v"},g={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\","'":"'"},m={n:"\n",r:"\r",t:"\t",f:"\f","\\":"\\",'"':'"'};function b(e,t,r,s,i,n){var a,o,u,l,c;return l=e.length,a=null,u=function(r,s){var i,n,o;for(o="",t++,a=e.charAt(t);t<l;){if(a===r)return t++,o;if("\\"===a)if(t++,(a=e.charAt(t))===r)o+=r;else if(i=s[a])o+=i;else{if(d(a)){for(n=a,t++,a=e.charAt(t);d(a);)n+=a,t++,a=e.charAt(t);" "===a&&(t++,a=e.charAt(t)),o+=String.fromCharCode(parseInt(n,16));continue}o+=a}else o+=a;t++,a=e.charAt(t)}return o},o=function(){var r,s="";for(a=e.charAt(t);t<l;){if((r=a)>="a"&&r<="z"||r>="A"&&r<="Z"||r>="0"&&r<="9"||"-"===r||"_"===r)s+=a;else{if("\\"!==a)return s;if(++t>=l)throw Error("Expected symbol but end of file reached.");if(a=e.charAt(t),v[a])s+=a;else{if(d(a)){var i=a;for(t++,a=e.charAt(t);d(a);)i+=a,t++,a=e.charAt(t);" "===a&&(t++,a=e.charAt(t)),s+=String.fromCharCode(parseInt(i,16));continue}s+=a}}t++,a=e.charAt(t)}return s},c=function(){a=e.charAt(t);for(var r=!1;" "===a||"\t"===a||"\n"===a||"\r"===a||"\f"===a;)r=!0,t++,a=e.charAt(t);return r},this.parse=function(){var r=this.parseSelector();if(t<l)throw Error('Rule expected but "'+e.charAt(t)+'" found.');return r},this.parseSelector=function(){var r,s=r=this.parseSingleSelector();for(a=e.charAt(t);","===a;){if(t++,c(),"selectors"!==r.type&&(r={type:"selectors",selectors:[s]}),!(s=this.parseSingleSelector()))throw Error('Rule expected after ",".');r.selectors.push(s)}return r},this.parseSingleSelector=function(){c();var r={type:"ruleSet"},s=this.parseRule();if(!s)return null;for(var n=r;s&&(s.type="rule",n.rule=s,n=s,c(),a=e.charAt(t),!(t>=l||","===a||")"===a));)if(i[a]){var o=a;if(t++,c(),!(s=this.parseRule()))throw Error('Rule expected after "'+o+'".');s.nestingOperator=o}else(s=this.parseRule())&&(s.nestingOperator=null);return r},this.parseRule=function(){for(var i,h=null;t<l;)if("*"===(a=e.charAt(t)))t++,(h=h||{}).tagName="*";else if((i=a)>="a"&&i<="z"||i>="A"&&i<="Z"||"-"===i||"_"===i||"\\"===a)(h=h||{}).tagName=o();else if("."===a)t++,((h=h||{}).classNames=h.classNames||[]).push(o());else if("#"===a)t++,(h=h||{}).id=o();else if("["===a){t++,c();var f={name:o()};if(c(),"]"===a)t++;else{var p="";if(s[a]&&(p=a,t++,a=e.charAt(t)),t>=l)throw Error('Expected "=" but end of file reached.');if("="!==a)throw Error('Expected "=" but "'+a+'" found.');f.operator=p+"=",t++,c();var d="";if(f.valueType="string",'"'===a)d=u('"',m);else if("'"===a)d=u("'",g);else if(n&&"$"===a)t++,d=o(),f.valueType="substitute";else{for(;t<l&&"]"!==a;)d+=a,t++,a=e.charAt(t);d=d.trim()}if(c(),t>=l)throw Error('Expected "]" but end of file reached.');if("]"!==a)throw Error('Expected "]" but "'+a+'" found.');t++,f.value=d}((h=h||{}).attrs=h.attrs||[]).push(f)}else{if(":"!==a)break;t++;var v=o(),y={name:v};if("("===a){t++;var b="";if(c(),"selector"===r[v])y.valueType="selector",b=this.parseSelector();else{if(y.valueType=r[v]||"string",'"'===a)b=u('"',m);else if("'"===a)b=u("'",g);else if(n&&"$"===a)t++,b=o(),y.valueType="substitute";else{for(;t<l&&")"!==a;)b+=a,t++,a=e.charAt(t);b=b.trim()}c()}if(t>=l)throw Error('Expected ")" but end of file reached.');if(")"!==a)throw Error('Expected ")" but "'+a+'" found.');t++,y.value=b}((h=h||{}).pseudos=h.pseudos||[]).push(y)}return h},this}p.prototype.parse=function(e){return new b(e,0,this.pseudos,this.attrEqualityMods,this.ruleNestingOperators,this.substitutesEnabled).parse()},p.prototype.escapeIdentifier=function(e){for(var t="",r=0,s=e.length;r<s;){var i=e.charAt(r);if(v[i])t+="\\"+i;else if("_"===i||"-"===i||i>="A"&&i<="Z"||i>="a"&&i<="z"||0!==r&&i>="0"&&i<="9")t+=i;else{var n=i.charCodeAt(0);if(55296==(63488&n)){var a=e.charCodeAt(r++);if(55296!=(64512&n)||56320!=(64512&a))throw Error("UCS-2(decode): illegal sequence");n=((1023&n)<<10)+(1023&a)+65536}t+="\\"+n.toString(16)+" "}r++}return t},p.prototype.escapeStr=function(e){for(var t,r,s="",i=0,n=e.length;i<n;)'"'===(t=e.charAt(i))?t='\\"':"\\"===t?t="\\\\":(r=y[t])&&(t=r),s+=t,i++;return'"'+s+'"'},p.prototype.render=function(e){return this._renderEntity(e).trim()},p.prototype._renderEntity=function(e){var t,r,s;switch(s="",e.type){case"ruleSet":for(t=e.rule,r=[];t;)t.nestingOperator&&r.push(t.nestingOperator),r.push(this._renderEntity(t)),t=t.rule;s=r.join(" ");break;case"selectors":s=e.selectors.map(this._renderEntity,this).join(", ");break;case"rule":e.tagName&&(s="*"===e.tagName?"*":this.escapeIdentifier(e.tagName)),e.id&&(s+="#"+this.escapeIdentifier(e.id)),e.classNames&&(s+=e.classNames.map((function(e){return"."+this.escapeIdentifier(e)}),this).join("")),e.attrs&&(s+=e.attrs.map((function(e){return e.operator?"substitute"===e.valueType?"["+this.escapeIdentifier(e.name)+e.operator+"$"+e.value+"]":"["+this.escapeIdentifier(e.name)+e.operator+this.escapeStr(e.value)+"]":"["+this.escapeIdentifier(e.name)+"]"}),this).join("")),e.pseudos&&(s+=e.pseudos.map((function(e){return e.valueType?"selector"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+this._renderEntity(e.value)+")":"substitute"===e.valueType?":"+this.escapeIdentifier(e.name)+"($"+e.value+")":"numeric"===e.valueType?":"+this.escapeIdentifier(e.name)+"("+e.value+")":":"+this.escapeIdentifier(e.name)+"("+this.escapeIdentifier(e.value)+")":":"+this.escapeIdentifier(e.name)}),this).join(""));break;default:throw Error('Unknown entity type: "'+e.type(NaN))}return s};const E=new(0,{CssSelectorParser:{CssSelectorParser:p}.CssSelectorParser}.CssSelectorParser);E.registerNestingOperators(">","+","~"),E.registerAttrEqualityMods("^","$","*","~","|"),E.enableSubstitutes();var w=(e,t)=>{let r=e;for(;r.rule&&r.__id!==t.__id-1;)r=r.rule;return r.__id===t.__id-1?r:null},A=e=>{const t=(e=>{try{const t=E.parse(e);if("ruleSet"!==t.type)throw new Error("Unsupported CSS selector");return t}catch(e){throw new Error("Invalid CSS selector")}})(e),r=(e=>{let t=0,r=e.rule;for(r.__id=t++;r.rule&&"rule"===r.rule.type;)r=r.rule,r.__id=t++;return r})(t),s=[r];let i=null;for(;i=w(t,i||r);)s.push(i);return s};return e=>e.split(/\s*,\s*/g).map(e=>f(A(e)))}();
